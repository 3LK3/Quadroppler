[gd_scene load_steps=14 format=4 uid="uid://dlytjviag4n4l"]

[ext_resource type="Script" path="res://scenes/game.gd" id="1_b6xy1"]
[ext_resource type="Script" path="res://game/core/gameplay/gameplay.gd" id="2_koiq3"]
[ext_resource type="PackedScene" uid="uid://fm8f76m5j0oa" path="res://game/core/systems/piece_control_system.tscn" id="6_3drwq"]
[ext_resource type="Texture2D" uid="uid://drgn5h6n2flpq" path="res://assets/textures/tilesets/board/board.png" id="7_xljyw"]
[ext_resource type="PackedScene" uid="uid://n06imbgsml0" path="res://game/core/systems/tile_system.tscn" id="8_07xjd"]
[ext_resource type="PackedScene" uid="uid://g07csdwhtp1k" path="res://game/ui/piece_preview.tscn" id="9_61egj"]
[ext_resource type="Texture2D" uid="uid://dqyqm1w3vt8f" path="res://assets/textures/tilesets/pieces/tile_default.png" id="13_dwvvn"]
[ext_resource type="PackedScene" uid="uid://ce43ema6vs1hw" path="res://game/ui/debug/frame_rate_label.tscn" id="15_n3xen"]
[ext_resource type="FontFile" uid="uid://dlqeyjjm7bvl4" path="res://assets/fonts/vcr_osd_mono.ttf" id="16_v6jtk"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_7noqc"]
resource_name = "<null>"
texture = ExtResource("7_xljyw")
texture_region_size = Vector2i(32, 32)
0:0/0 = 0
1:0/0 = 0
2:0/0 = 0
3:0/0 = 0
0:1/0 = 0
1:1/0 = 0
2:1/0 = 0
3:1/0 = 0
0:2/0 = 0
1:2/0 = 0
2:2/0 = 0
3:2/0 = 0
0:3/0 = 0
1:3/0 = 0
2:3/0 = 0
3:3/0 = 0
0:4/0 = 0
1:4/0 = 0
2:4/0 = 0
3:4/0 = 0
0:5/0 = 0
1:5/0 = 0
2:5/0 = 0
3:5/0 = 0
0:6/0 = 0
1:6/0 = 0
2:6/0 = 0
3:6/0 = 0
0:7/0 = 0
1:7/0 = 0
2:7/0 = 0
3:7/0 = 0

[sub_resource type="TileSet" id="TileSet_dv7q0"]
tile_size = Vector2i(32, 32)
sources/1 = SubResource("TileSetAtlasSource_7noqc")

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_r5nb8"]
bg_color = Color(0.355297, 0.00755119, 0.551581, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_eqo0d"]
bg_color = Color(0.0980392, 0, 0.172549, 0.705882)

[node name="Game" type="Node2D"]
script = ExtResource("1_b6xy1")

[node name="Gameplay" type="Node" parent="." node_paths=PackedStringArray("board")]
unique_name_in_owner = true
script = ExtResource("2_koiq3")
board = NodePath("../PieceControlSystem")

[node name="PieceControlSystem" parent="." node_paths=PackedStringArray("tile_system") instance=ExtResource("6_3drwq")]
tile_system = NodePath("../TileSystem")
tile_texture = ExtResource("13_dwvvn")

[node name="Camera" type="Camera2D" parent="."]

[node name="Background" type="TileMapLayer" parent="."]
tile_map_data = PackedByteArray("AAAFAAoAAQADAAAAAAAFAPz/AQADAAAAAAAFAP3/AQADAAAAAAAFAP7/AQADAAAAAAAFAP//AQADAAAAAAAFAAAAAQADAAAAAAAFAAEAAQADAAAAAAAFAAIAAQADAAAAAAAFAAMAAQADAAAAAAAFAAQAAQADAAAAAAAFAAUAAQADAAAAAAAFAAYAAQADAAAAAAAFAAcAAQADAAAAAAAFAAgAAQADAAAAAAAFAAkAAQADAAAAAAD6/woAAQADAAAAAAD7/woAAQADAAAAAAD8/woAAQADAAAAAAD9/woAAQADAAAAAAD+/woAAQADAAAAAAD//woAAQADAAAAAAAAAAoAAQADAAAAAAABAAoAAQADAAAAAAACAAoAAQADAAAAAAADAAoAAQADAAAAAAAEAAoAAQADAAAAAAD6//7/AQADAAAAAAD6////AQADAAAAAAD6/wAAAQADAAAAAAD6/wEAAQADAAAAAAD6/wIAAQADAAAAAAD6/wMAAQADAAAAAAD6/wQAAQADAAAAAAD6/wUAAQADAAAAAAD6/wYAAQADAAAAAAD6/wcAAQADAAAAAAD6/wgAAQADAAAAAAD6/wkAAQADAAAAAAD6//X/AQADAAAAAAD6//b/AQADAAAAAAD6//f/AQADAAAAAAD6//j/AQADAAAAAAD6//n/AQADAAAAAAD6//r/AQADAAAAAAD6//v/AQADAAAAAAD6//z/AQADAAAAAAD6//3/AQADAAAAAAD7//X/AQADAAAAAAD8//X/AQADAAAAAAD9//X/AQADAAAAAAD+//X/AQADAAAAAAD///X/AQADAAAAAAAAAPX/AQADAAAAAAABAPX/AQADAAAAAAACAPX/AQADAAAAAAADAPX/AQADAAAAAAAEAPX/AQADAAAAAAAFAPX/AQADAAAAAAAFAPb/AQADAAAAAAAFAPf/AQADAAAAAAAFAPj/AQADAAAAAAAFAPn/AQADAAAAAAAFAPr/AQADAAAAAAAFAPv/AQADAAAAAAA=")
tile_set = SubResource("TileSet_dv7q0")

[node name="TileSystem" parent="." instance=ExtResource("8_07xjd")]

[node name="GameUserInterface" type="CanvasLayer" parent="."]
unique_name_in_owner = true
layer = 0

[node name="RightSidebar" type="PanelContainer" parent="GameUserInterface"]
anchors_preset = 6
anchor_left = 1.0
anchor_top = 0.5
anchor_right = 1.0
anchor_bottom = 0.5
offset_left = -152.0
offset_top = -85.5
offset_bottom = 85.5
grow_horizontal = 0
grow_vertical = 2
size_flags_vertical = 3
theme_override_styles/panel = SubResource("StyleBoxFlat_r5nb8")

[node name="VBoxContainer" type="VBoxContainer" parent="GameUserInterface/RightSidebar"]
layout_mode = 2

[node name="MarginContainer" type="MarginContainer" parent="GameUserInterface/RightSidebar/VBoxContainer"]
layout_mode = 2
theme_override_constants/margin_left = 24
theme_override_constants/margin_top = 24
theme_override_constants/margin_right = 24
theme_override_constants/margin_bottom = 24

[node name="VBoxContainer" type="VBoxContainer" parent="GameUserInterface/RightSidebar/VBoxContainer/MarginContainer"]
layout_mode = 2
theme_override_constants/separation = 3

[node name="NextPieceLabel" type="Label" parent="GameUserInterface/RightSidebar/VBoxContainer/MarginContainer/VBoxContainer"]
layout_mode = 2
text = "Next piece:"

[node name="NextPiecePreview" parent="GameUserInterface/RightSidebar/VBoxContainer/MarginContainer/VBoxContainer" instance=ExtResource("9_61egj")]
custom_minimum_size = Vector2(120, 120)
layout_mode = 2
size_flags_vertical = 1

[node name="DebugContainer" type="PanelContainer" parent="GameUserInterface"]
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -38.0
offset_bottom = 17.0
grow_horizontal = 0
theme_override_styles/panel = SubResource("StyleBoxFlat_eqo0d")

[node name="MarginContainer" type="MarginContainer" parent="GameUserInterface/DebugContainer"]
layout_mode = 2
theme_override_constants/margin_left = 4
theme_override_constants/margin_top = 4
theme_override_constants/margin_right = 4
theme_override_constants/margin_bottom = 4

[node name="FrameRateLabel" parent="GameUserInterface/DebugContainer/MarginContainer" instance=ExtResource("15_n3xen")]
custom_minimum_size = Vector2(30, 0)
layout_mode = 2
size_flags_vertical = 1
theme_override_fonts/font = ExtResource("16_v6jtk")
theme_override_font_sizes/font_size = 10
